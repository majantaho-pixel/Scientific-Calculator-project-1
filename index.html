<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Multi Calculator | Scientific • BMI • Graph</title>

<!-- Tailwind CSS CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Math.js (Scientific calculator logic) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>

<!-- Plotly.js (Graph Calculator) -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
.tab-active {
  background: #2563eb;
  color: white;
}
.calc-btn {
  background: #e2e8f0;
  padding: 14px;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  font-weight: 600;
}
.calc-btn:hover {
  background: #cbd5e1;
}
</style>
</head>

<body class="bg-gray-100 text-gray-900">
<!-- HEADER -->
<header class="bg-white shadow p-4 text-center text-xl font-bold">
  Multi Calculator — Scientific • BMI • Graph
</header>

<!-- MAIN CONTAINER -->
<div class="max-w-4xl mx-auto mt-6 p-4 bg-white rounded-xl shadow">

  <!-- TABS -->
  <div class="flex gap-2 mb-4">
    <button id="tabScientific" class="tab-active px-4 py-2 rounded">Scientific</button>
    <button id="tabBMI" class="px-4 py-2 rounded">BMI</button>
    <button id="tabGraph" class="px-4 py-2 rounded">Graph</button>
  </div>

<!-- ✅ SCIENTIFIC CALCULATOR -->
<div id="scientificCalc">
  <input id="scDisplay" class="w-full p-4 text-right text-2xl border rounded mb-4" readonly />

  <div class="grid grid-cols-4 gap-3">
    <div class="calc-btn" onclick="addToCalc('7')">7</div>
    <div class="calc-btn" onclick="addToCalc('8')">8</div>
    <div class="calc-btn" onclick="addToCalc('9')">9</div>
    <div class="calc-btn bg-red-400 text-white" onclick="clearCalc()">C</div>

    <div class="calc-btn" onclick="addToCalc('4')">4</div>
    <div class="calc-btn" onclick="addToCalc('5')">5</div>
    <div class="calc-btn" onclick="addToCalc('6')">6</div>
    <div class="calc-btn" onclick="addToCalc('*')">×</div>

    <div class="calc-btn" onclick="addToCalc('1')">1</div>
    <div class="calc-btn" onclick="addToCalc('2')">2</div>
    <div class="calc-btn" onclick="addToCalc('3')">3</div>
    <div class="calc-btn" onclick="addToCalc('-')">-</div>

    <div class="calc-btn" onclick="addToCalc('0')">0</div>
    <div class="calc-btn" onclick="addToCalc('.')">.</div>
    <div class="calc-btn" onclick="evaluateCalc()">=</div>
    <div class="calc-btn" onclick="addToCalc('+')">+</div>

    <div class="calc-btn" onclick="addToCalc('(')"> ( </div>
    <div class="calc-btn" onclick="addToCalc(')')"> ) </div>
    <div class="calc-btn" onclick="addToCalc('pi')">π</div>
    <div class="calc-btn" onclick="addToCalc('/')">÷</div>

    <div class="calc-btn" onclick="addToCalc('sin(')">sin</div>
    <div class="calc-btn" onclick="addToCalc('cos(')">cos</div>
    <div class="calc-btn" onclick="addToCalc('tan(')">tan</div>
    <div class="calc-btn" onclick="addToCalc('log(')">log</div>
  </div>
</div>

<!-- ✅ BMI CALCULATOR -->
<div id="bmiCalc" class="hidden">
  <div class="mt-6">
    <label class="font-semibold">Height (cm)</label>
    <input id="bmiHeight" type="number" class="w-full p-2 border rounded mb-3"/>
    
    <label class="font-semibold">Weight (kg)</label>
    <input id="bmiWeight" type="number" class="w-full p-2 border rounded mb-3"/>

    <button onclick="calcBMI()" class="w-full bg-blue-600 text-white p-3 rounded">Calculate BMI</button>

    <p id="bmiResult" class="mt-4 text-xl font-bold"></p>
  </div>
</div>

<!-- ✅ GRAPH CALCULATOR -->
<div id="graphCalc" class="hidden">
  <label class="font-semibold">Enter Equation (ex: x^2 + 2)</label>
  <input id="graphEq" class="w-full p-2 border rounded mb-3" placeholder="y = ..."/>

  <button onclick="drawGraph()" class="w-full bg-green-600 text-white p-3 rounded">Plot</button>

  <div id="graphBox" class="mt-4" style="height:350px;"></div>
</div>

</div>

<script>
// ********* SCIENTIFIC CALCULATOR LOGIC *********
function addToCalc(val) {
  document.getElementById("scDisplay").value += val;
}
function clearCalc() {
  document.getElementById("scDisplay").value = "";
}
function evaluateCalc() {
  try {
    let result = math.evaluate(document.getElementById("scDisplay").value);
    document.getElementById("scDisplay").value = result;
  } catch {
    document.getElementById("scDisplay").value = "Error";
  }
}

// ********* BMI CALCULATOR *********
function calcBMI() {
  let h = parseFloat(document.getElementById("bmiHeight").value) / 100;
  let w = parseFloat(document.getElementById("bmiWeight").value);
  let bmi = (w / (h * h)).toFixed(2);

  let category =
    bmi < 18.5 ? "Underweight" :
    bmi < 25 ? "Normal" :
    bmi < 30 ? "Overweight" : "Obese";

  document.getElementById("bmiResult").innerText = `BMI: ${bmi} (${category})`;
}

// ********* GRAPH CALCULATOR (Plotly) *********
function drawGraph() {
  let eq = document.getElementById("graphEq").value;
  let x = [...Array(200).keys()].map(i => i / 10 - 10);
  let y = x.map(v => math.evaluate(eq, { x: v }));

  Plotly.newPlot("graphBox", [{ x, y, mode: "lines" }]);
}

// ********* TABS *********
function swapTab(active, hide1, hide2) {
  document.getElementById(active).classList.remove("hidden");
  document.getElementById(hide1).classList.add("hidden");
  document.getElementById(hide2).classList.add("hidden");
}

document.getElementById("tabScientific").onclick = () => swapTab("scientificCalc", "bmiCalc", "graphCalc");
document.getElementById("tabBMI").onclick = () => swapTab("bmiCalc", "scientificCalc", "graphCalc");
document.getElementById("tabGraph").onclick = () => swapTab("graphCalc", "scientificCalc", "bmiCalc");
</script>

</body>
</html>
