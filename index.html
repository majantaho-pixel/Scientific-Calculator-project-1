<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Velocity Gaming Speed Test</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg-color: #0a0a0a;
  --accent-color: #00ffea;
  --text-color: #ffffff;
  --card-bg: rgba(20,20,30,0.8);
  --button-bg: linear-gradient(45deg,#00ffea,#0077ff);
  --button-hover: linear-gradient(45deg,#00ffaa,#00ccff);
}
[data-theme="light"] {
  --bg-color:#f5f5f5;
  --text-color:#0a0a0a;
  --card-bg:rgba(255,255,255,0.9);
  --button-bg:linear-gradient(45deg,#0077ff,#00aaff);
  --button-hover:linear-gradient(45deg,#0055ff,#00ccff);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Orbitron',sans-serif;}
body{
  background: var(--bg-color);
  color: var(--text-color);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  overflow-x:hidden;
  position:relative;
}
#bgCanvas{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:-1;
}
header{
  width:100%;
  padding:15px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  backdrop-filter:blur(10px);
  background: rgba(0,0,0,0.4);
  box-shadow:0 0 20px var(--accent-color);
  border-bottom:1px solid var(--accent-color);
}
header h1{
  font-size:1.8rem;
  color: var(--accent-color);
  text-shadow:0 0 10px var(--accent-color);
}
#themeToggle{
  padding:8px 14px;
  border:2px solid var(--accent-color);
  background:none;
  color:var(--accent-color);
  border-radius:12px;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}
#themeToggle:hover{
  background: var(--accent-color);
  color:#000;
  box-shadow:0 0 20px var(--accent-color);
}
main{
  padding:30px 20px;
  width:100%;
  max-width:1000px;
}
.gauges{
  display:flex;
  flex-wrap:wrap;
  justify-content:space-around;
  margin-bottom:30px;
}
.gauge-container{
  background: var(--card-bg);
  border-radius:20px;
  box-shadow:0 0 20px var(--accent-color);
  padding:20px;
  text-align:center;
  margin:15px;
  width:240px;
  transition:0.3s;
  position:relative;
}
.gauge-container:hover{
  box-shadow:0 0 40px var(--accent-color);
}
canvas{
  background:#111;
  border-radius:50%;
  box-shadow:0 0 15px var(--accent-color);
}
.gauge-container p{
  margin-top:15px;
  font-size:1.1rem;
  font-weight:bold;
  color: var(--accent-color);
  text-shadow:0 0 10px var(--accent-color);
}
.info{
  display:flex;
  flex-wrap:wrap;
  justify-content:space-around;
  margin-bottom:30px;
}
.info div{
  background: var(--card-bg);
  padding:12px 18px;
  border-radius:15px;
  min-width:140px;
  text-align:center;
  box-shadow:0 0 15px var(--accent-color);
  transition:0.3s;
}
.info div:hover{
  box-shadow:0 0 25px var(--accent-color);
}
#serverSelect{
  padding:8px 12px;
  border-radius:10px;
  border:1px solid var(--accent-color);
  margin-bottom:25px;
  background: var(--card-bg);
  color: var(--text-color);
}
#startBtn{
  padding:12px 25px;
  font-size:1.2rem;
  border:none;
  border-radius:15px;
  cursor:pointer;
  background: var(--button-bg);
  color:#000;
  box-shadow:0 0 25px var(--accent-color);
  margin-bottom:20px;
  transition:0.3s;
}
#startBtn:hover{
  background: var(--button-hover);
  transform:scale(1.05);
  box-shadow:0 0 50px var(--accent-color);
}
#results{
  text-align:center;
}
#results button{
  margin-top:12px;
  padding:10px 16px;
  cursor:pointer;
  border:none;
  border-radius:12px;
  background: var(--button-bg);
  color:#000;
  box-shadow:0 0 25px var(--accent-color);
  transition:0.3s;
}
#results button:hover{
  background: var(--button-hover);
  box-shadow:0 0 50px var(--accent-color);
}
footer{
  width:100%;
  padding:20px;
  text-align:center;
  margin-top:auto;
  backdrop-filter:blur(10px);
  background: rgba(0,0,0,0.3);
  box-shadow:0 -2px 20px var(--accent-color);
  border-top:1px solid var(--accent-color);
}
#ads{
  margin-top:10px;
  height:70px;
  line-height:70px;
  color:var(--accent-color);
  font-weight:bold;
  text-shadow:0 0 10px var(--accent-color);
  background: rgba(255,255,255,0.05);
  border-radius:15px;
}
.shareGlow{
  animation:glowPulse 1s infinite alternate;
  border:4px solid var(--accent-color);
  border-radius:15px;
}
@keyframes glowPulse{
  from{box-shadow:0 0 20px var(--accent-color);}
  to{box-shadow:0 0 50px var(--accent-color);}
}
@media(max-width:768px){
  .gauges{flex-direction:column; align-items:center;}
  .gauge-container{width:80%;}
  .info div{width:80%; margin:10px auto;}
}
</style>
</head>
<body data-theme="dark">

<canvas id="bgCanvas"></canvas>

<header>
  <h1>Velocity Test</h1>
  <button id="themeToggle">Toggle Theme</button>
</header>

<main id="mainCard">
  <div class="gauges">
    <div class="gauge-container">
      <canvas id="downloadGauge" width="200" height="200"></canvas>
      <p>Download <span id="downloadSpeed">0</span> Mbps</p>
    </div>
    <div class="gauge-container">
      <canvas id="uploadGauge" width="200" height="200"></canvas>
      <p>Upload <span id="uploadSpeed">0</span> Mbps</p>
    </div>
  </div>

  <div class="info">
    <div>Ping: <span id="ping">0</span> ms</div>
    <div>Jitter: <span id="jitter">0</span> ms</div>
    <div>IP: <span id="ip">-</span></div>
    <div>Location: <span id="location">-</span></div>
    <div>ISP: <span id="isp">-</span></div>
  </div>

  <select id="serverSelect"></select>
  <br>
  <button id="startBtn">Start Test</button>

  <div id="results">
    <button id="shareBtn">Share Result Image</button>
  </div>
</main>

<footer>
  <div>Â© 2025 Velocity Test</div>
  <div id="ads">Ads Space</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
// Theme toggle
document.getElementById('themeToggle').addEventListener('click',()=>{
  const current=document.body.getAttribute('data-theme');
  document.body.setAttribute('data-theme',current==='dark'?'light':'dark');
});

// Server List
const servers=[
  {name:"Pakistan Server"},
  {name:"US Server"},
  {name:"Germany Server"},
];
const serverSelect=document.getElementById('serverSelect');
servers.forEach((s,i)=>{const o=document.createElement('option');o.value=i;o.textContent=s.name;serverSelect.appendChild(o);});

// Gauges
const downloadCanvas=document.getElementById('downloadGauge');
const uploadCanvas=document.getElementById('uploadGauge');
const dctx=downloadCanvas.getContext('2d');
const uctx=uploadCanvas.getContext('2d');
function drawGauge(ctx,percent,color){
  const r=ctx.canvas.width/2-10;
  ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);
  ctx.beginPath();
  ctx.arc(ctx.canvas.width/2,ctx.canvas.height/2,r,0,2*Math.PI);
  ctx.fillStyle=getComputedStyle(document.body).getPropertyValue('--card-bg');
  ctx.fill();
  ctx.beginPath();
  ctx.arc(ctx.canvas.width/2,ctx.canvas.height/2,r,-Math.PI/2,-Math.PI/2+2*Math.PI*percent/100);
  ctx.strokeStyle=color;
  ctx.lineWidth=12;
  ctx.shadowBlur=20;
  ctx.shadowColor=color;
  ctx.stroke();
  const angle=-Math.PI/2+2*Math.PI*percent/100;
  const x=ctx.canvas.width/2+r*0.85*Math.cos(angle);
  const y=ctx.canvas.height/2+r*0.85*Math.sin(angle);
  ctx.beginPath();
  ctx.moveTo(ctx.canvas.width/2,ctx.canvas.height/2);
  ctx.lineTo(x,y);
  ctx.strokeStyle="#ff0000";
  ctx.lineWidth=3;
  ctx.shadowBlur=15;
  ctx.stroke();
}
function animateGauge(ctx,target,id,color){
  let val=0;
  const step=target/50;
  const interval=setInterval(()=>{
    if(val>=target){clearInterval(interval);val=target;}
    drawGauge(ctx,val,color);
    document.getElementById(id).textContent=val.toFixed(2);
    val+=step;
  },20);
}

// IP + Location + ISP
async function fetchIPInfo(){
  try{
    const res=await fetch('https://ipapi.co/json/');
    const data=await res.json();
    document.getElementById('ip').textContent=data.ip;
    document.getElementById('location').textContent=data.city+", "+data.country_name;
    document.getElementById('isp').textContent=data.org;
  }catch(e){console.log(e);}
}

// Dummy Speed Test
function runTest(){
  document.getElementById('startBtn').disabled=true;
  const ping=(Math.random()*50+10).toFixed(0);
  const jitter=(Math.random()*20+5).toFixed(0);
  document.getElementById('ping').textContent=ping;
  document.getElementById('jitter').textContent=jitter;
  const download=(Math.random()*90+10).toFixed(2);
  const upload=(Math.random()*50+5).toFixed(2);
  animateGauge(dctx,download,'downloadSpeed',getComputedStyle(document.body).getPropertyValue('--accent-color'));
  animateGauge(uctx,upload,'uploadSpeed',getComputedStyle(document.body).getPropertyValue('--accent-color'));
  let h=JSON.parse(localStorage.getItem('speedHistory')||"[]");
  h.unshift({date:new Date().toLocaleString(),download,upload,ping,jitter,ip:document.getElementById('ip').textContent,location:document.getElementById('location').textContent,isp:document.getElementById('isp').textContent});
  if(h.length>10) h.pop();
  localStorage.setItem('speedHistory',JSON.stringify(h));
  document.getElementById('startBtn').disabled=false;
}
document.getElementById('startBtn').addEventListener('click',()=>{fetchIPInfo();runTest();});

// Share Result with Animated Glow
document.getElementById('shareBtn').addEventListener('click',()=>{
  const main=document.getElementById('mainCard');
  main.classList.add('shareGlow');
  html2canvas(main).then(c=>{
    const l=document.createElement('a');l.download='speed-test.png';l.href=c.toDataURL();l.click();
    setTimeout(()=>{main.classList.remove('shareGlow');},1200);
  });
});

// Neon Grid + Particles + Ping Lines
const canvas=document.getElementById('bgCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
const particles=[];
const gridSpacing=50;
for(let i=0;i<150;i++){particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2+1,dx:(Math.random()-0.5)*1,dy:(Math.random()-0.5)*1,color:`rgba(0,255,255,${Math.random()})`});}
let mouse={x:canvas.width/2,y:canvas.height/2};
window.addEventListener('mousemove',e=>{mouse.x=e.clientX;mouse.y=e.clientY;});
function drawBackground(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.strokeStyle='rgba(0,255,255,0.05)';
  ctx.lineWidth=1;
  for(let x=0;x<canvas.width;x+=gridSpacing){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,canvas.height);ctx.stroke();}
  for(let y=0;y<canvas.height;y+=gridSpacing){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(canvas.width,y);ctx.stroke();}
  particles.forEach(p=>{
    ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,2*Math.PI);ctx.fillStyle=p.color;ctx.fill();
    p.x+=p.dx+(mouse.x-canvas.width/2)*0.0005;
    p.y+=p.dy+(mouse.y-canvas.height/2)*0.0005;
    if(p.x<0)p.x=canvas.width;if(p.x>canvas.width)p.x=0;
    if(p.y<0)p.y=canvas.height;if(p.y>canvas.height)p.y=0;
  });
  const dX=downloadCanvas.getBoundingClientRect().left+downloadCanvas.width/2;
  const dY=downloadCanvas.getBoundingClientRect().top+downloadCanvas.height/2;
  const uX=uploadCanvas.getBoundingClientRect().left+uploadCanvas.width/2;
  const uY=uploadCanvas.getBoundingClientRect().top+uploadCanvas.height/2;
  const sX=serverSelect.getBoundingClientRect().left+serverSelect.offsetWidth/2;
  const sY=serverSelect.getBoundingClientRect().top+serverSelect.offsetHeight/2;
  ctx.strokeStyle='rgba(0,255,255,0.3)';
  ctx.lineWidth=2;
  ctx.beginPath();
  ctx.moveTo(dX,dY); ctx.lineTo(sX,sY); ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(uX,uY); ctx.lineTo(sX,sY); ctx.stroke();
  requestAnimationFrame(drawBackground);
}
drawBackground();
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});
</script>
</body>
</html>
