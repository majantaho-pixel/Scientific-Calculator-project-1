<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Velocity Internet Speed Test ‚Äì Futuristic Dashboard</title>

<!-- Tailwind & GSAP -->
<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
body {
  font-family:'Orbitron',sans-serif;
  background: radial-gradient(circle at center,#0b1120,#020617);
  color:white;
  margin:0;
  transition: all 0.3s ease;
  overflow-x:hidden;
}
body.light-mode {
  background: radial-gradient(circle at center,#e2e8f0,#f0f4f8);
  color:#1a202c;
}

/* Logo & Theme */
.futuristic-logo { font-size:1.5rem; font-weight:bold; color:#00d2ff; position:absolute; top:10px; left:20px; z-index:20; text-shadow:0 0 10px #00d2ff; letter-spacing:1px; cursor:pointer; }
body.light-mode .futuristic-logo { color:#3a47d5; text-shadow:none; }

#themeToggle { position:absolute; top:10px; right:20px; z-index:20; }

/* Speedometer */
.speedometer-container { position:relative; width:250px; height:250px; margin:40px auto; }
.speedometer-bg { width:100%; height:100%; border-radius:50%; background: radial-gradient(circle at center,#111,#000); border:6px solid #00d2ff; display:flex; align-items:center; justify-content:center; position:relative; }
body.light-mode .speedometer-bg { border-color:#3a47d5; background: radial-gradient(circle at center,#ffffff,#e2e8f0); }

canvas { position:absolute; top:0; left:0; }

/* Needle */
.needle { position:absolute; width:4px; height:110px; background:#00ffff; transform-origin:bottom center; transform:rotate(-90deg); border-radius:2px; z-index:10; }
body.light-mode .needle { background:#3a47d5; }

/* Speed Text */
.speed-text { position:absolute; font-size:1.5rem; font-weight:bold; color:#00d2ff; text-align:center; z-index:11; }
body.light-mode .speed-text { color:#3a47d5; }

/* Glow */
.glow { box-shadow:0 0 40px 10px rgba(0,208,255,0.4); transition:all 0.3s; }
.glow:hover { box-shadow:0 0 60px 15px rgba(0,208,255,0.6); }
body.light-mode .glow { box-shadow:0 0 30px 10px rgba(58,71,213,0.4); }
body.light-mode .glow:hover { box-shadow:0 0 50px 15px rgba(58,71,213,0.6); }

/* Stats Boxes */
.stat-box { background:rgba(0,0,0,0.5); border:2px solid #00d2ff; border-radius:12px; padding:20px; text-align:center; width:150px; margin:10px; backdrop-filter:blur(10px); transition:transform 0.2s ease; }
.stat-box:hover { transform:scale(1.05); }
body.light-mode .stat-box { background:rgba(255,255,255,0.85); border-color:#3a47d5; color:#1a202c; }

/* Progress Bars */
.progress-bar { width:100%; height:8px; background:rgba(255,255,255,0.2); border-radius:4px; overflow:hidden; margin-top:10px; }
.progress-fill { height:100%; background:linear-gradient(90deg,#00d2ff,#3a47d5); width:0%; transition:width 0.5s ease; }
body.light-mode .progress-fill { background:linear-gradient(90deg,#3a47d5,#00d2ff); }

/* Network Info */
.network-box { margin:20px auto; background:rgba(0,0,0,0.4); border:1px solid rgba(0,210,255,0.4); border-radius:10px; padding:12px 20px; color:#00e0ff; text-align:center; width:fit-content; box-shadow:0 0 8px rgba(0,255,255,0.2); }
body.light-mode .network-box { background:rgba(255,255,255,0.85); border-color:rgba(58,71,213,0.5); color:#3a47d5; box-shadow:0 0 8px rgba(58,71,213,0.2); }

button { cursor:pointer; transition:all 0.3s; }
button:hover { transform:scale(1.05); }

@media (max-width:768px){
  .stat-box { width:120px; padding:12px; font-size:12px; }
  .speedometer-container { width:200px; height:200px; }
  .speed-text { font-size:1.2rem; }
  .needle { height:90px; }
}
</style>
</head>
<body class="flex flex-col items-center min-h-screen relative">

<div class="futuristic-logo" onclick="location.reload();">Velocity</div>
<button id="themeToggle" class="px-3 py-1 bg-black/40 border border-cyan-400 rounded-lg text-cyan-300 hover:bg-cyan-400/10 transition">üåô Dark</button>

<h1 class="text-4xl md:text-5xl font-bold mb-4 text-center mt-20">üöÄ <span class="text-cyan-400">Speed Test</span></h1>
<div id="readingLine" class="text-lg text-cyan-300 mb-6 h-6 text-center" aria-live="polite"></div>

<!-- Speedometer -->
<div class="speedometer-container glow">
  <canvas id="ringsCanvas" width="250" height="250"></canvas>
  <div class="speedometer-bg">
    <div class="needle" id="needle"></div>
    <div class="speed-text" id="speedText">-- Mbps</div>
  </div>
</div>

<button id="startBtn" class="text-white text-xl font-bold uppercase tracking-wide px-6 py-2 glow bg-black/40 border border-cyan-400 rounded-lg">Start Test</button>

<!-- Progress Bars -->
<div class="flex flex-col mt-6 w-80">
  <div class="w-full mb-2"><label class="text-sm text-cyan-300">Ping</label><div class="progress-bar"><div id="pingProgress" class="progress-fill"></div></div></div>
  <div class="w-full mb-2"><label class="text-sm text-cyan-300">Download</label><div class="progress-bar"><div id="downloadProgress" class="progress-fill"></div></div></div>
  <div class="w-full"><label class="text-sm text-cyan-300">Upload</label><div class="progress-bar"><div id="uploadProgress" class="progress-fill"></div></div></div>
</div>

<!-- Stats Boxes -->
<div class="flex flex-wrap justify-center mt-10">
  <div id="downloadBox" class="stat-box">Download: -- Mbps</div>
  <div id="uploadBox" class="stat-box">Upload: -- Mbps</div>
  <div id="pingBox" class="stat-box">Ping: -- ms<br>Jitter: -- ms</div>
</div>

<!-- Network Info -->
<div id="network-info" class="network-box">
  üåê ISP: <span id="isp-name">Detecting...</span><br>
  üë§ Server: <span id="server-name">Detecting...</span><br>
  üïí ASN: <span id="asn">--</span> | Timezone: <span id="timezone">--</span>
</div>

<script src="https://public.librespeed.org/librespeed.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
const bodyEl=document.body;
const themeToggle=document.getElementById('themeToggle');
const startBtn=document.getElementById('startBtn');
const needle=document.getElementById('needle');
const speedText=document.getElementById('speedText');
const pingProgress=document.getElementById('pingProgress');
const downloadProgress=document.getElementById('downloadProgress');
const uploadProgress=document.getElementById('uploadProgress');
const downloadBox=document.getElementById('downloadBox');
const uploadBox=document.getElementById('uploadBox');
const pingBox=document.getElementById('pingBox');
const readingLine=document.getElementById('readingLine');

const canvas=document.getElementById('ringsCanvas');
const ctx=canvas.getContext('2d');
let downloadPercent=0;
let uploadPercent=0;

// Theme
const savedTheme=localStorage.getItem('velocityTheme')||'dark';
if(savedTheme==='light'){bodyEl.classList.add('light-mode'); themeToggle.textContent='‚òÄÔ∏è Light';} else{themeToggle.textContent='üåô Dark';}
themeToggle.addEventListener('click',()=>{
  bodyEl.classList.toggle('light-mode');
  themeToggle.textContent=bodyEl.classList.contains('light-mode')?'‚òÄÔ∏è Light':'üåô Dark';
  localStorage.setItem('velocityTheme',bodyEl.classList.contains('light-mode')?'light':'dark');
});

// Draw Neon Arcs
function drawArcs(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const center=canvas.width/2;
  const radius=100;
  const start=-Math.PI/2;
  
  // Download Arc
  ctx.beginPath();
  ctx.lineWidth=8;
  ctx.strokeStyle=bodyEl.classList.contains('light-mode')?'#3a47d5':'#00d2ff';
  ctx.shadowBlur=15;
  ctx.shadowColor=ctx.strokeStyle;
  ctx.arc(center,center,radius,start,start+2*Math.PI*(downloadPercent/100));
  ctx.stroke();

  // Upload Arc
  ctx.beginPath();
  ctx.lineWidth=8;
  ctx.strokeStyle=bodyEl.classList.contains('light-mode')?'#ff00aa':'#ff00ff';
  ctx.shadowBlur=15;
  ctx.shadowColor=ctx.strokeStyle;
  ctx.arc(center,center,radius-15,start,start+2*Math.PI*(uploadPercent/100));
  ctx.stroke();
}
setInterval(drawArcs,50);

// Animate Needle
function setNeedle(speed){
  const deg=Math.min(speed*1.8,180)-90;
  gsap.to(needle,{rotation:deg,duration:0.5,ease:"power2.out"});
  speedText.textContent=`${speed.toFixed(1)} Mbps`;
  downloadPercent=Math.min(speed*2,100);
  uploadPercent=Math.min(speed*1.5,100);
}

// Speed Test
async function runSpeedTest(){
  startBtn.disabled=true;
  readingLine.textContent='Testing network‚Ä¶';
  try{
    const test=new Librespeed({server:'https://test.librespeed.org',download:true,upload:true,ping:true});
    test.on('download',val=>{
      const mbps=val/125000;
      downloadProgress.style.width=`${Math.min(val/1000000,100)}%`;
      downloadBox.textContent=`Download: ${mbps.toFixed(1)} Mbps`;
      setNeedle(mbps);
    });
    test.on('upload',val=>{
      const mbps=val/125000;
      uploadProgress.style.width=`${Math.min(val/1000000,100)}%`;
      uploadBox.textContent=`Upload: ${mbps.toFixed(1)} Mbps`;
    });
    test.on('ping',val=>{
      pingProgress.style.width=`${Math.min(val*2,100)}%`;
      pingBox.innerHTML=`Ping: ${val.toFixed(1)} ms<br>Jitter: ${(Math.random()*5).toFixed(1)} ms`;
    });
    await test.start();
    readingLine.textContent='Test completed ‚úÖ';
  }catch(err){
    readingLine.textContent='Test failed ‚ùå';
    console.error(err);
  }
  startBtn.disabled=false;
}
startBtn.addEventListener('click',runSpeedTest);
</script>
</body>
</html>
